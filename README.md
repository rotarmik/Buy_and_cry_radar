# Buy & Cry Radar

> Многоисточниковый сервис, который собирает финансовые новости, проверяет их агентами, определяет «горячесть» и выдаёт готовые черновики для соцсетей.
# ! Актуальная версия в develop! 
## Что делает проект
- агрегирует новости из внешних источников через единый Router;
- валидирует информационные поводы LLM-агентами, извлекает сущности и фильтрует шум;
- формирует готовые черновики публикаций и (опционально) карточки для соцсетей;

## Архитектура:

### Router — сбор и нормализация
- фан-аут на подключённые источники (Tavily Web Search, Telegram Hot News Parser, Interfax/e-disclosure и др.);
- унификация структуры новостей, первичная очистка и дедупликация;
- управление временным окном и фильтрами по региону/тикеру, приоритизация источников по весам.

### Validator — проверка источников и контекста
- цепочка LLM-агентов проверяет релевантность события запросу и уточняет контекст;
- оценивает доверие к источникам и отбрасывает новости ниже порога качества.

### Evaluator — агентный спор о «горячести»
- опирается на многоагентную схему: **оптимист** оптимистично смотрит на горячесть новости, **пессимист** писсимистично смотрит на горячесть новости, **судья** агрегирует аргументы и выдаёт итоговый hotness;
- агенты спорят на основе метрик (охват, временная динамика, вовлечённость, доверие к источникам) 
- возвращается отсортированный список событий с аргументацией по агентам.

### Formatter — подготовка публикаций
- модуль обработки текста (перевод, лемматизация, NER) обогащает данные перед форматированием;
- гибридная кластеризация по эмбеддингам и ключевым словам объединяет схожие новости;
- генератор черновиков строит посты с заголовком, ледом, ключевыми bullet-поинтами, цитатой и call-to-action;
- дополнительный выход: генерация карточек для соцсетей по структуре события.


На каждом шаге создаются промежуточные артефакты в `cache/`, что ускоряет повторные прогоны.

100 % работающий запуск c генерацией черновика:
1.python main.py (в гланой директории)
2. указание границ временного интервала start_time = '2025-08-01'/end_time = '2025-09-01' без тикера и региона

# Зависимости и требования к библиотекам в requirements.txt
# Все результаты работы формируются в папке cache
# Возможно возникновение ошибкит связанной с ключем к OpenRouter. Если она возникает, то необходимо локально вставить другой ключ
